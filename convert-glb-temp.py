import bpy, os
output_dir = "C:/usdz/converted"
os.makedirs(output_dir, exist_ok=True)
glb_files = ["C:\\usdz\\downloads\\ak_47_42f09afa_v1.glb", "C:\\usdz\\downloads\\ak_47_42f09afa_v2.glb", "C:\\usdz\\downloads\\ak_47_42f09afa_v3.glb", "C:\\usdz\\downloads\\ak_47_42f09afa_v4.glb", "C:\\usdz\\downloads\\blue_shipping_container_60b5ea93_v1.glb", "C:\\usdz\\downloads\\blue_shipping_container_60b5ea93_v2.glb", "C:\\usdz\\downloads\\blue_shipping_container_60b5ea93_v3.glb", "C:\\usdz\\downloads\\blue_shipping_container_60b5ea93_v4.glb", "C:\\usdz\\downloads\\blue_shipping_container_63cc3905_v1.glb", "C:\\usdz\\downloads\\blue_shipping_container_63cc3905_v2.glb", "C:\\usdz\\downloads\\blue_shipping_container_63cc3905_v3.glb", "C:\\usdz\\downloads\\blue_shipping_container_63cc3905_v4.glb", "C:\\usdz\\downloads\\break_room_chair_14a39c7b_v1.glb", "C:\\usdz\\downloads\\break_room_chair_14a39c7b_v2.glb", "C:\\usdz\\downloads\\break_room_chair_14a39c7b_v3.glb", "C:\\usdz\\downloads\\break_room_chair_14a39c7b_v4.glb", "C:\\usdz\\downloads\\break_room_table_09b9fd0d_v1.glb", "C:\\usdz\\downloads\\break_room_table_09b9fd0d_v2.glb", "C:\\usdz\\downloads\\break_room_table_09b9fd0d_v3.glb", "C:\\usdz\\downloads\\break_room_table_09b9fd0d_v4.glb", "C:\\usdz\\downloads\\broken_beer_bottles_d16e9f56_v1.glb", "C:\\usdz\\downloads\\broken_beer_bottles_d16e9f56_v2.glb", "C:\\usdz\\downloads\\broken_beer_bottles_d16e9f56_v3.glb", "C:\\usdz\\downloads\\broken_car_b6d2e66d_v1.glb", "C:\\usdz\\downloads\\broken_car_b6d2e66d_v2.glb", "C:\\usdz\\downloads\\broken_car_b6d2e66d_v3.glb", "C:\\usdz\\downloads\\broken_car_b6d2e66d_v4.glb", "C:\\usdz\\downloads\\broken_office_chair_1dc3c50c_v1.glb", "C:\\usdz\\downloads\\broken_office_chair_1dc3c50c_v2.glb", "C:\\usdz\\downloads\\broken_office_chair_1dc3c50c_v3.glb", "C:\\usdz\\downloads\\broken_office_chair_1dc3c50c_v4.glb", "C:\\usdz\\downloads\\broken_water_cooler_with_scattered_cups_aa26c38a_v1.glb", "C:\\usdz\\downloads\\broken_water_cooler_with_scattered_cups_aa26c38a_v2.glb", "C:\\usdz\\downloads\\broken_water_cooler_with_scattered_cups_aa26c38a_v3.glb", "C:\\usdz\\downloads\\broken_water_cooler_with_scattered_cups_aa26c38a_v4.glb", "C:\\usdz\\downloads\\cash_register_0c0dcad2_v1.glb", "C:\\usdz\\downloads\\cash_register_0c0dcad2_v2.glb", "C:\\usdz\\downloads\\cash_register_0c0dcad2_v3.glb", "C:\\usdz\\downloads\\crashed_pickup_truck_ae555020_v1.glb", "C:\\usdz\\downloads\\crashed_pickup_truck_ae555020_v2.glb", "C:\\usdz\\downloads\\crashed_pickup_truck_ae555020_v3.glb", "C:\\usdz\\downloads\\crashed_pickup_truck_ae555020_v4.glb", "C:\\usdz\\downloads\\crashed_rusty_minivan_f872ff37_v1.glb", "C:\\usdz\\downloads\\crashed_rusty_minivan_f872ff37_v2.glb", "C:\\usdz\\downloads\\crashed_rusty_minivan_f872ff37_v3.glb", "C:\\usdz\\downloads\\crashed_rusty_minivan_f872ff37_v4.glb", "C:\\usdz\\downloads\\crushed_oil_barrel_e450f43f_v1.glb", "C:\\usdz\\downloads\\crushed_oil_barrel_e450f43f_v2.glb", "C:\\usdz\\downloads\\crushed_oil_barrel_e450f43f_v3.glb", "C:\\usdz\\downloads\\crushed_oil_barrel_e450f43f_v4.glb", "C:\\usdz\\downloads\\dumpster_b076662a_v1.glb", "C:\\usdz\\downloads\\dumpster_b076662a_v2.glb", "C:\\usdz\\downloads\\dumpster_b076662a_v3.glb", "C:\\usdz\\downloads\\emergency_staircase_9228c6bf_v1.glb", "C:\\usdz\\downloads\\emergency_staircase_9228c6bf_v2.glb", "C:\\usdz\\downloads\\emergency_staircase_9228c6bf_v3.glb", "C:\\usdz\\downloads\\emergency_staircase_9228c6bf_v4.glb", "C:\\usdz\\downloads\\espresso_machine_e722ed8c_v1.glb", "C:\\usdz\\downloads\\espresso_machine_e722ed8c_v2.glb", "C:\\usdz\\downloads\\espresso_machine_e722ed8c_v3.glb", "C:\\usdz\\downloads\\espresso_machine_e722ed8c_v4.glb", "C:\\usdz\\downloads\\fancy_reception_desk_58fde71d_v1.glb", "C:\\usdz\\downloads\\fancy_reception_desk_58fde71d_v2.glb", "C:\\usdz\\downloads\\fancy_reception_desk_58fde71d_v3.glb", "C:\\usdz\\downloads\\fancy_reception_desk_58fde71d_v4.glb", "C:\\usdz\\downloads\\filing_cabinet_0194476c_v1.glb", "C:\\usdz\\downloads\\filing_cabinet_0194476c_v2.glb", "C:\\usdz\\downloads\\filing_cabinet_0194476c_v3.glb", "C:\\usdz\\downloads\\filing_cabinet_0194476c_v4.glb", "C:\\usdz\\downloads\\filing_cabinet_and_desk_with_computer_85ad453f_v1.glb", "C:\\usdz\\downloads\\filing_cabinet_and_desk_with_computer_85ad453f_v2.glb", "C:\\usdz\\downloads\\filing_cabinet_and_desk_with_computer_85ad453f_v3.glb", "C:\\usdz\\downloads\\filing_cabinet_and_desk_with_computer_85ad453f_v4.glb", "C:\\usdz\\downloads\\fire_extinguisher_wall_mounted_bc0dddd4_v1.glb", "C:\\usdz\\downloads\\fire_extinguisher_wall_mounted_bc0dddd4_v2.glb", "C:\\usdz\\downloads\\fire_extinguisher_wall_mounted_bc0dddd4_v3.glb", "C:\\usdz\\downloads\\fire_extinguisher_wall_mounted_bc0dddd4_v4.glb", "C:\\usdz\\downloads\\garbage_can_6b3d052b_v1.glb", "C:\\usdz\\downloads\\garbage_can_6b3d052b_v2.glb", "C:\\usdz\\downloads\\garbage_can_6b3d052b_v3.glb", "C:\\usdz\\downloads\\garbage_can_6b3d052b_v4.glb", "C:\\usdz\\downloads\\large_rock_051293c4_v1.glb", "C:\\usdz\\downloads\\large_rock_051293c4_v2.glb", "C:\\usdz\\downloads\\large_rock_051293c4_v3.glb", "C:\\usdz\\downloads\\large_rock_051293c4_v4.glb", "C:\\usdz\\downloads\\rusty_crashed_car_15ba74d2_v1.glb", "C:\\usdz\\downloads\\rusty_crashed_car_15ba74d2_v2.glb", "C:\\usdz\\downloads\\rusty_crashed_car_15ba74d2_v3.glb", "C:\\usdz\\downloads\\rusty_crashed_car_15ba74d2_v4.glb", "C:\\usdz\\downloads\\rusty_crashed_pickup_truck_3820a2c5_v1.glb", "C:\\usdz\\downloads\\rusty_crashed_pickup_truck_3820a2c5_v2.glb", "C:\\usdz\\downloads\\rusty_crashed_pickup_truck_3820a2c5_v3.glb", "C:\\usdz\\downloads\\rusty_crashed_pickup_truck_3820a2c5_v4.glb", "C:\\usdz\\downloads\\rusty_oil_barrel_a1ef5c6b_v1.glb", "C:\\usdz\\downloads\\rusty_oil_barrel_a1ef5c6b_v2.glb", "C:\\usdz\\downloads\\rusty_oil_barrel_a1ef5c6b_v3.glb", "C:\\usdz\\downloads\\rusty_oil_barrel_a1ef5c6b_v4.glb", "C:\\usdz\\downloads\\server_rack_c2999a18_v1.glb", "C:\\usdz\\downloads\\server_rack_c2999a18_v2.glb", "C:\\usdz\\downloads\\server_rack_c2999a18_v3.glb", "C:\\usdz\\downloads\\server_rack_c2999a18_v4.glb", "C:\\usdz\\downloads\\shipping_container_d50ffbf4_v1.glb", "C:\\usdz\\downloads\\shipping_container_d50ffbf4_v2.glb", "C:\\usdz\\downloads\\shipping_container_d50ffbf4_v3.glb", "C:\\usdz\\downloads\\shipping_container_d50ffbf4_v4.glb", "C:\\usdz\\downloads\\smashed_oil_barrel_6a965a03_v1.glb", "C:\\usdz\\downloads\\smashed_oil_barrel_6a965a03_v2.glb", "C:\\usdz\\downloads\\smashed_oil_barrel_6a965a03_v3.glb", "C:\\usdz\\downloads\\smashed_oil_barrel_6a965a03_v4.glb", "C:\\usdz\\downloads\\storage_container_3d82f0c5_v1.glb", "C:\\usdz\\downloads\\storage_container_3d82f0c5_v2.glb", "C:\\usdz\\downloads\\storage_container_3d82f0c5_v3.glb", "C:\\usdz\\downloads\\storage_container_3d82f0c5_v4.glb", "C:\\usdz\\downloads\\traffic_light_b1babccc_v1.glb", "C:\\usdz\\downloads\\traffic_light_b1babccc_v2.glb", "C:\\usdz\\downloads\\traffic_light_b1babccc_v3.glb", "C:\\usdz\\downloads\\traffic_light_b1babccc_v4.glb", "C:\\usdz\\downloads\\warehouse_crate_6e8a0927_v1.glb", "C:\\usdz\\downloads\\warehouse_crate_6e8a0927_v2.glb", "C:\\usdz\\downloads\\warehouse_crate_6e8a0927_v3.glb", "C:\\usdz\\downloads\\warehouse_crate_6e8a0927_v4.glb", "C:\\usdz\\downloads\\warehouse_shelf_b7b87618_v1.glb", "C:\\usdz\\downloads\\warehouse_shelf_b7b87618_v2.glb", "C:\\usdz\\downloads\\warehouse_shelf_b7b87618_v3.glb", "C:\\usdz\\downloads\\warehouse_shelf_b7b87618_v4.glb"]
for glb_path in glb_files:
    name = os.path.basename(glb_path)
    out_path = os.path.join(output_dir, name)
    try:
        bpy.ops.wm.read_factory_settings(use_empty=True)
        bpy.ops.import_scene.gltf(filepath=glb_path)
        bpy.ops.export_scene.gltf(
            filepath=out_path,
            export_format='GLB',
            export_image_format='WEBP',
            export_image_add_webp=False,
            export_image_quality=15,
            export_draco_mesh_compression_enable=True,
            export_draco_mesh_compression_level=6,
        )
        print(f"DONE: {out_path}")
    except Exception as e:
        print(f"ERROR {glb_path}: {str(e)}")
